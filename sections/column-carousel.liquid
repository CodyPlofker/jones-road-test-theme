<div class="column-carousel" style="background: {{ section.settings.bg_color }}; --text-color: {{ section.settings.text_color }};" data-component="columnCarousel">
  <div class="column-carousel__carousel {% if section.blocks.size > 1 %} swiper-container js-columnCarousel {% endif %}">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="column-carousel__column swiper-slide js-columnSlide">
          <div class="column-carousel__image">
            <div>
              <picture>
                <source 
                  srcset="{{ block.settings.image | img_url: '460x' }} 2x"
                  media="(min-width: 1024px)"
                >
                <img 
                  src="{{ block.settings.image | img_url: '230x' }}"
                  alt="{{ block.settings.image.alt }}"
                  width="230"
                  height="230"
                  {% if template contains 'index' %}
                    loading="lazy"
                  {% endif %}
                >
              </picture>
            </div>
          </div>
          <div class="column-carousel__content">
            {% if block.settings.heading != blank %}
              <h3 class="column-carousel__content-heading">{{ block.settings.heading }}</h3>
            {% endif %}
            {% if block.settings.description != blank %}
              <div class="column-carousel__content-description text-underline">{{ block.settings.description }}</div>
            {% endif %}
            {% if block.settings.cta_text != blank %}
              <a class="column-carousel__content-cta" href="{{ block.settings.cta_link }}">
                {{ block.settings.cta_text }}
              </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
    {% if section.blocks.size > 1 %}
      <div class="column-carousel__navigation js-columnNavigation">
        <button class="prev">&lt;</button>
        <div class="column-carousel__navigation-numbers">
          <span class="js-columnCurrent">1</span>/<span>{{ section.blocks.size }}</span>
        </div>
        <button class="next">&gt;</button>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
  {
    "name": "Column Carousel",
    "class": "column-carousel__section",
    "max_blocks": 4,
    "settings": [
      {
        "type": "header",
        "content": "Settings"
      },
      {
        "type": "color",
        "id": "bg_color",
        "label": "Background Color",
        "default": "#F5F2EC"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text Color",
        "default": "#000"
      }
    ],
    "blocks": [
      {
        "type": "column",
        "name": "Column",
        "settings": [
          {
            "type": "header",
            "content": "Content"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading"
          },
          {
            "type": "richtext",
            "id": "description",
            "label": "Description"
          },
          {
            "type": "text",
            "id": "cta_text",
            "label": "CTA Text"
          },
          {
            "type": "url",
            "id": "cta_link",
            "label": "CTA Link"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      }
    ],
    "presets": [{ "name": "Column Carousel" }]
  }
{% endschema %}