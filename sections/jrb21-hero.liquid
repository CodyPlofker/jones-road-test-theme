{% comment %} JRB21 Hero - V4 (Winning Variation) {% endcomment %}
<div 
  class="jrb21-hero--inner"
  style="
    --ratio-mobile: 1 / 1.4;
    --ratio-desktop: 16 / 9;
  "
>
  <!-- Video Background -->
  <div class="jrb21-hero--video-wrapper">
    <video 
      class="jrb21-hero--video"
      autoplay
      muted
      loop
      playsinline
      preload="auto"
      webkit-playsinline
      x5-playsinline
    >
      {% if section.settings.video_webm != blank %}
        <source src="{{ section.settings.video_webm }}" type="video/webm">
      {% endif %}
      {% if section.settings.video_mp4 != blank %}
        <source src="{{ section.settings.video_mp4 }}" type="video/mp4">
      {% endif %}
    </video>
  </div>

  <!-- Content Overlay -->
  <div class="hero__content hero__content--center-left jrb21-hero--content">
    
    <!-- Hero Heading -->
    {% if section.settings.heading_line_1 != blank or section.settings.heading_line_2 != blank %}
      <div class="hero__heading hero__heading--black hero__heading--highlight jrb21-heading">
        <span style="--highlight: #ffffff;" class="hero__heading--element">
          {% if section.settings.heading_line_1 != blank %}
            <span>{{ section.settings.heading_line_1 }}</span>
          {% endif %}
          {% if section.settings.heading_line_2 != blank %}
            <span>{{ section.settings.heading_line_2 }}</span>
          {% endif %}
        </span>
        
        {% if section.settings.subheading_desktop != blank %}
          <p class="hero__subheading ringside hero__subheading--black desktop jrb21-subheading">
            {{ section.settings.subheading_desktop }}
          </p>
        {% endif %}
        
        {% if section.settings.subheading_mobile != blank %}
          <p class="hero__subheading ringside hero__subheading--black mobile jrb21-subheading">
            {{ section.settings.subheading_mobile }}
          </p>
        {% endif %}
      </div>
    {% endif %}
    
    <!-- CTA Button -->
    {% if section.settings.cta_text != blank and section.settings.cta_link != blank %}
      <div class="hero__cta jrb21-cta">
        <a href="{{ section.settings.cta_link }}" class="button button--black">{{ section.settings.cta_text }}</a>
      </div>
    {% endif %}
    
  </div>
</div>

<!-- Testimonial Bar -->
{% if section.settings.testimonial_quote != blank %}
  <div class="jrb21-v4-wrapper">
    <div class="jrb21-v4-bar">
      <p class="jrb21-v4-quote">
        {{ section.settings.testimonial_quote }}
      </p>
      {% if section.settings.testimonial_attribution != blank %}
        <p class="jrb21-v4-attribution">
          {{ section.settings.testimonial_attribution }}
        </p>
      {% endif %}
    </div>
  </div>
{% endif %}

<style>
/* JRB21 Hero - Video Background Styles */
.jrb21-hero--inner {
  position: relative;
  width: 100%;
  aspect-ratio: var(--ratio-mobile);
  overflow: hidden;
}

@media (min-width: 768px) {
  .jrb21-hero--inner {
    aspect-ratio: var(--ratio-desktop);
  }
}

/* Video Background */
.jrb21-hero--video-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.jrb21-hero--video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Override z-index for content to appear above video */
.jrb21-hero--content {
  z-index: 2;
}

/* Responsive subheading rules */
.jrb21-subheading.desktop {
  display: block;
}

.jrb21-subheading.mobile {
  display: none;
}

@media (min-width: 701px) {
  .jrb21-subheading.desktop {
    display: block;
  }
  
  .jrb21-subheading.mobile {
    display: none;
  }
  
  .jrb21-hero--content {
    top: 50% !important;
  }
}

@media (max-width: 700px) {
  .jrb21-subheading.desktop {
    display: none;
  }
  
  .jrb21-subheading.mobile {
    display: block;
    font-size: 13px !important;
    line-height: 20px;
  }
  
  /* Mobile background for heading spans */
  .jrb21-heading .hero__heading--element > span {
    background: #ffffff;
  }

  .hero__cta.jrb21-cta .button{
    font-weight: 400;
  }
}

/* Testimonial Bar Styles */
.jrb21-v4-wrapper {
  width: 100%;
  background-color: #F6F5F1;
}

.jrb21-v4-bar {
  padding: 32px 24px;
  text-align: center;
}

@media (min-width: 701px) {
  .jrb21-v4-bar {
    max-width: 400px;
    margin: 0 auto;
    padding: 40px 60px;
  }
}

.jrb21-v4-quote {
  font-size: 20px;
  font-weight: 400;
  font-family: Canela, serif;
  color: #000000;
  margin: 0 0 16px 0;
  line-height: 1.4;
}

.jrb21-v4-attribution {
  font-size: 13px;
  font-weight: 700;
  font-family: 'Articulat CF', Arial, sans-serif;
  color: #000000;
  margin: 0;
  letter-spacing: 0.5px;
}

</style>

{%- schema -%}
  {
    "name": "JRB21 Hero",
    "tag": "section",
    "class": "section-jrb21-hero",
    "settings": [
      {
        "type": "header",
        "content": "Video Settings"
      },
      {
        "type": "text",
        "id": "video_webm",
        "label": "Video URL (WebM)",
        "info": "WebM format for better compression on modern browsers",
        "default": "https://cdn.shopify.com/videos/c/o/v/f8652e0db688408cbe5d10259d0aa950.webm"
      },
      {
        "type": "text",
        "id": "video_mp4",
        "label": "Video URL (MP4)",
        "info": "MP4 format as fallback for Safari/iOS",
        "default": "https://cdn.shopify.com/videos/c/o/v/5d91a9d5524d4ef8aa8ca5bb1e475d3b.mp4"
      },
      {
        "type": "header",
        "content": "Hero Content"
      },
      {
        "type": "text",
        "id": "heading_line_1",
        "label": "Heading Line 1",
        "default": "Your Routine,"
      },
      {
        "type": "text",
        "id": "heading_line_2",
        "label": "Heading Line 2",
        "default": "Personalized"
      },
      {
        "type": "textarea",
        "id": "subheading_desktop",
        "label": "Subheading (Desktop)",
        "default": "Choose from our 6 quizzes below and get products that just fit."
      },
      {
        "type": "textarea",
        "id": "subheading_mobile",
        "label": "Subheading (Mobile)",
        "default": "Choose from our 6 quizzes below and get products that just fit."
      },
      {
        "type": "text",
        "id": "cta_text",
        "label": "CTA Button Text",
        "default": "FIND YOUR PERFECT MATCH"
      },
      {
        "type": "text",
        "id": "cta_link",
        "label": "CTA Button Link",
        "default": "#jrb18-quiz-grid"
      },
      {
        "type": "header",
        "content": "Testimonial Bar"
      },
      {
        "type": "textarea",
        "id": "testimonial_quote",
        "label": "Testimonial Quote",
        "default": "\"Naturally, I was a little skeptical about being able to match my skin based on a quiz, but my result was dead on.\""
      },
      {
        "type": "text",
        "id": "testimonial_attribution",
        "label": "Testimonial Attribution",
        "default": "KRISTINE A, VERIFIED BUYER"
      }
    ],
    "presets": [
      {
        "name": "JRB21 Hero"
      }
    ]
  }
{%- endschema -%}
