{%- assign config = section.settings -%}
{%- assign product = all_products[config.product] -%}

<section class="redesign-hero-product" style="
  --bg-color: {{ config.background_color }};
  --text-color: {{ config.text_color }};
  --accent-color: {{ config.accent_color }};
  --layout-direction: {{ config.image_position }};
">
  <div class="redesign-hero-product__container">
    {%- comment -%} Media Side {%- endcomment -%}
    <div class="redesign-hero-product__media">
      {%- if config.video_url != blank -%}
        <div class="redesign-hero-product__video-wrapper">
          <video
            class="redesign-hero-product__video"
            autoplay
            muted
            loop
            playsinline
            poster="{{ config.image | image_url: width: 800 }}"
          >
            <source src="{{ config.video_url }}" type="video/mp4">
          </video>
          <span class="redesign-hero-product__video-label">See it in action</span>
        </div>
      {%- elsif config.image != blank -%}
        <img
          src="{{ config.image | image_url: width: 800 }}"
          alt="{{ config.heading | default: product.title | escape }}"
          class="redesign-hero-product__image"
          loading="lazy"
        >
      {%- elsif product.featured_image != blank -%}
        <img
          src="{{ product.featured_image | image_url: width: 800 }}"
          alt="{{ product.title | escape }}"
          class="redesign-hero-product__image"
          loading="lazy"
        >
      {%- endif -%}

      {%- comment -%} Before/After if enabled {%- endcomment -%}
      {%- if config.before_image != blank and config.after_image != blank -%}
        <div class="redesign-hero-product__before-after">
          <div class="redesign-hero-product__ba-images">
            <img src="{{ config.before_image | image_url: width: 400 }}" alt="Before" class="redesign-hero-product__ba-before">
            <img src="{{ config.after_image | image_url: width: 400 }}" alt="After" class="redesign-hero-product__ba-after">
          </div>
          <div class="redesign-hero-product__ba-labels">
            <span>Before</span>
            <span>After</span>
          </div>
        </div>
      {%- endif -%}
    </div>

    {%- comment -%} Content Side {%- endcomment -%}
    <div class="redesign-hero-product__content">
      {%- if config.eyebrow != blank -%}
        <span class="redesign-hero-product__eyebrow">{{ config.eyebrow }}</span>
      {%- endif -%}

      <h2 class="redesign-hero-product__heading">
        {{ config.heading | default: product.title }}
      </h2>

      {%- if config.show_price and product != blank -%}
        <div class="redesign-hero-product__price">
          {{ product.price | money }}
        </div>
      {%- elsif config.price_text != blank -%}
        <div class="redesign-hero-product__price">
          {{ config.price_text }}
        </div>
      {%- endif -%}

      {%- if config.description != blank -%}
        <p class="redesign-hero-product__description">{{ config.description }}</p>
      {%- endif -%}

      {%- comment -%} Benefits List {%- endcomment -%}
      {%- assign benefit_blocks = section.blocks | where: 'type', 'benefit' -%}
      {%- if benefit_blocks.size > 0 -%}
        <ul class="redesign-hero-product__benefits">
          {%- for block in benefit_blocks -%}
            <li class="redesign-hero-product__benefit" {{ block.shopify_attributes }}>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent-color)" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>{{ block.settings.text }}</span>
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}

      {%- comment -%} Texture/Finish Info {%- endcomment -%}
      {%- if config.texture_info != blank -%}
        <div class="redesign-hero-product__texture">
          <span class="redesign-hero-product__texture-label">Finish:</span>
          <span class="redesign-hero-product__texture-value">{{ config.texture_info }}</span>
        </div>
      {%- endif -%}

      {%- comment -%} CTAs {%- endcomment -%}
      <div class="redesign-hero-product__ctas">
        {%- if config.primary_cta_text != blank -%}
          <a href="{{ config.primary_cta_url | default: product.url }}" class="redesign-hero-product__cta redesign-hero-product__cta--primary">
            {{ config.primary_cta_text }}
          </a>
        {%- endif -%}

        {%- if config.secondary_cta_text != blank -%}
          <a href="{{ config.secondary_cta_url }}" class="redesign-hero-product__cta redesign-hero-product__cta--secondary">
            {{ config.secondary_cta_text }}
          </a>
        {%- endif -%}
      </div>

      {%- comment -%} Shade Count {%- endcomment -%}
      {%- if config.shade_count != blank -%}
        <p class="redesign-hero-product__shades">
          Available in {{ config.shade_count }} shades
        </p>
      {%- endif -%}
    </div>
  </div>
</section>

<style>
  .redesign-hero-product {
    background: var(--bg-color);
    color: var(--text-color);
    padding: 48px 20px;
  }

  @media (min-width: 768px) {
    .redesign-hero-product {
      padding: 80px 40px;
    }
  }

  .redesign-hero-product__container {
    display: grid;
    gap: 32px;
    max-width: 1400px;
    margin: 0 auto;
    align-items: center;
  }

  @media (min-width: 768px) {
    .redesign-hero-product__container {
      grid-template-columns: 1fr 1fr;
      gap: 64px;
    }

    .redesign-hero-product[style*="layout-direction: row-reverse"] .redesign-hero-product__container {
      direction: rtl;
    }

    .redesign-hero-product[style*="layout-direction: row-reverse"] .redesign-hero-product__container > * {
      direction: ltr;
    }
  }

  /* Media */
  .redesign-hero-product__media {
    position: relative;
  }

  .redesign-hero-product__image,
  .redesign-hero-product__video {
    width: 100%;
    height: auto;
    display: block;
  }

  .redesign-hero-product__video-wrapper {
    position: relative;
  }

  .redesign-hero-product__video-label {
    position: absolute;
    bottom: 16px;
    left: 16px;
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 6px 12px;
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Before/After */
  .redesign-hero-product__before-after {
    margin-top: 24px;
  }

  .redesign-hero-product__ba-images {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .redesign-hero-product__ba-images img {
    width: 100%;
    height: auto;
    border-radius: 4px;
  }

  .redesign-hero-product__ba-labels {
    display: flex;
    justify-content: space-around;
    margin-top: 8px;
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.7;
  }

  /* Content */
  .redesign-hero-product__content {
    max-width: 500px;
  }

  @media (min-width: 768px) {
    .redesign-hero-product__content {
      padding: 20px 0;
    }
  }

  .redesign-hero-product__eyebrow {
    display: block;
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent-color);
    margin-bottom: 12px;
  }

  .redesign-hero-product__heading {
    font-family: 'Canela', serif;
    font-size: 32px;
    font-weight: 300;
    line-height: 1.1;
    margin: 0 0 12px;
  }

  @media (min-width: 768px) {
    .redesign-hero-product__heading {
      font-size: 44px;
    }
  }

  .redesign-hero-product__price {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .redesign-hero-product__description {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 16px;
    line-height: 1.6;
    margin: 0 0 24px;
    opacity: 0.85;
  }

  /* Benefits */
  .redesign-hero-product__benefits {
    list-style: none;
    padding: 0;
    margin: 0 0 24px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .redesign-hero-product__benefit {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'ArticulatCF', sans-serif;
    font-size: 15px;
  }

  /* Texture */
  .redesign-hero-product__texture {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 24px;
    font-family: 'ArticulatCF', sans-serif;
    font-size: 14px;
  }

  .redesign-hero-product__texture-label {
    opacity: 0.7;
  }

  .redesign-hero-product__texture-value {
    font-weight: 600;
  }

  /* CTAs */
  .redesign-hero-product__ctas {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
  }

  @media (min-width: 768px) {
    .redesign-hero-product__ctas {
      flex-direction: row;
      gap: 16px;
    }
  }

  .redesign-hero-product__cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    font-family: 'ArticulatCF', sans-serif;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
  }

  .redesign-hero-product__cta--primary {
    background: var(--text-color);
    color: var(--bg-color);
    border: 2px solid var(--text-color);
  }

  .redesign-hero-product__cta--primary:hover {
    background: transparent;
    color: var(--text-color);
  }

  .redesign-hero-product__cta--secondary {
    background: transparent;
    color: var(--text-color);
    border: 2px solid var(--text-color);
  }

  .redesign-hero-product__cta--secondary:hover {
    background: var(--text-color);
    color: var(--bg-color);
  }

  /* Shades */
  .redesign-hero-product__shades {
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.7;
    margin: 0;
  }
</style>

{% schema %}
{
  "name": "Redesign - Hero Product",
  "tag": "section",
  "class": "redesign-hero-product-section",
  "settings": [
    {
      "type": "header",
      "content": "Product"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "checkbox",
      "id": "show_price",
      "label": "Show Product Price",
      "default": true
    },
    {
      "type": "text",
      "id": "price_text",
      "label": "Custom Price Text",
      "info": "Overrides product price if set",
      "default": ""
    },
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "info": "Overrides product image"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Application Video URL (MP4)",
      "info": "Shows product in action"
    },
    {
      "type": "image_picker",
      "id": "before_image",
      "label": "Before Image"
    },
    {
      "type": "image_picker",
      "id": "after_image",
      "label": "After Image"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow Text",
      "default": "Bestseller"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "info": "Leave blank to use product title",
      "default": "Miracle Balm"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "A multi-use, light-reflecting cream that gives skin a dewy, healthy-looking glow. Apply to cheeks, lips, or anywhere you want to glow."
    },
    {
      "type": "text",
      "id": "texture_info",
      "label": "Texture/Finish Info",
      "info": "Addresses user research need for consistency info",
      "default": "Dewy, buildable cream"
    },
    {
      "type": "text",
      "id": "shade_count",
      "label": "Shade Count",
      "default": "13"
    },
    {
      "type": "header",
      "content": "Primary CTA"
    },
    {
      "type": "text",
      "id": "primary_cta_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "primary_cta_url",
      "label": "Button URL",
      "info": "Leave blank to use product URL"
    },
    {
      "type": "header",
      "content": "Secondary CTA"
    },
    {
      "type": "text",
      "id": "secondary_cta_text",
      "label": "Button Text",
      "default": "Find Your Shade"
    },
    {
      "type": "url",
      "id": "secondary_cta_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        { "value": "row", "label": "Left" },
        { "value": "row-reverse", "label": "Right" }
      ],
      "default": "row"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#c9a050"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Benefit Text",
          "default": "Clean, skin-loving ingredients"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Redesign - Hero Product",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "text": "Clean, skin-loving ingredients"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Buildable coverage for all skin types"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Works on all ages and skin tones"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "No fragrance added"
          }
        }
      ]
    }
  ]
}
{% endschema %}
