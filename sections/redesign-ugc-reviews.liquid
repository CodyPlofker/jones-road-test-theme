{%- assign config = section.settings -%}

<section class="redesign-ugc" style="
  --bg-color: {{ config.background_color }};
  --text-color: {{ config.text_color }};
  --heading-color: {{ config.heading_color }};
">
  <div class="redesign-ugc__container">
    <div class="redesign-ugc__header">
      {%- if config.heading != blank -%}
        <h2 class="redesign-ugc__heading">{{ config.heading }}</h2>
      {%- endif -%}
      {%- if config.subheading != blank -%}
        <p class="redesign-ugc__subheading">{{ config.subheading }}</p>
      {%- endif -%}
      {%- if config.hashtag != blank -%}
        <span class="redesign-ugc__hashtag">{{ config.hashtag }}</span>
      {%- endif -%}
    </div>

    {%- comment -%} Photo Grid {%- endcomment -%}
    {%- assign photo_blocks = section.blocks | where: 'type', 'photo' -%}
    {%- if photo_blocks.size > 0 -%}
      <div class="redesign-ugc__photos" data-count="{{ photo_blocks.size }}">
        {%- for block in photo_blocks -%}
          <div class="redesign-ugc__photo" {{ block.shopify_attributes }}>
            {%- if block.settings.image != blank -%}
              <img
                src="{{ block.settings.image | image_url: width: 400 }}"
                alt="{{ block.settings.caption | default: 'Customer photo' | escape }}"
                loading="lazy"
              >
            {%- else -%}
              <div class="redesign-ugc__photo-placeholder"></div>
            {%- endif -%}

            {%- if block.settings.age != blank -%}
              <span class="redesign-ugc__photo-age">Age {{ block.settings.age }}</span>
            {%- endif -%}
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- comment -%} Reviews Carousel {%- endcomment -%}
    {%- assign review_blocks = section.blocks | where: 'type', 'review' -%}
    {%- if review_blocks.size > 0 -%}
      <div class="redesign-ugc__reviews">
        <div class="redesign-ugc__reviews-track">
          {%- for block in review_blocks -%}
            <div class="redesign-ugc__review" {{ block.shopify_attributes }}>
              <div class="redesign-ugc__review-stars">
                {%- for i in (1..5) -%}
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="#c9a050">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                {%- endfor -%}
              </div>

              {%- if block.settings.title != blank -%}
                <h4 class="redesign-ugc__review-title">"{{ block.settings.title }}"</h4>
              {%- endif -%}

              {%- if block.settings.text != blank -%}
                <p class="redesign-ugc__review-text">{{ block.settings.text }}</p>
              {%- endif -%}

              <div class="redesign-ugc__review-author">
                <span class="redesign-ugc__review-name">{{ block.settings.author }}</span>
                {%- if block.settings.age != blank -%}
                  <span class="redesign-ugc__review-age">, {{ block.settings.age }}</span>
                {%- endif -%}
                {%- if block.settings.verified -%}
                  <span class="redesign-ugc__review-verified">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="#c9a050">
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01" fill="none" stroke="#c9a050" stroke-width="2"></polyline>
                    </svg>
                    Verified
                  </span>
                {%- endif -%}
              </div>

              {%- if block.settings.product != blank -%}
                <span class="redesign-ugc__review-product">{{ block.settings.product }}</span>
              {%- endif -%}
            </div>
          {%- endfor -%}
        </div>
      </div>
    {%- endif -%}

    {%- comment -%} Age Diversity Callout {%- endcomment -%}
    {%- if config.show_age_callout -%}
      <div class="redesign-ugc__callout">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <p>{{ config.age_callout_text }}</p>
      </div>
    {%- endif -%}

    {%- if config.cta_text != blank -%}
      <div class="redesign-ugc__cta-wrapper">
        <a href="{{ config.cta_url }}" class="redesign-ugc__cta">
          {{ config.cta_text }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<style>
  .redesign-ugc {
    background: var(--bg-color);
    color: var(--text-color);
    padding: 48px 20px;
  }

  @media (min-width: 768px) {
    .redesign-ugc {
      padding: 80px 40px;
    }
  }

  .redesign-ugc__container {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Header */
  .redesign-ugc__header {
    text-align: center;
    margin-bottom: 32px;
  }

  @media (min-width: 768px) {
    .redesign-ugc__header {
      margin-bottom: 48px;
    }
  }

  .redesign-ugc__heading {
    font-family: 'Canela', serif;
    font-size: 28px;
    font-weight: 300;
    color: var(--heading-color);
    margin: 0 0 12px;
  }

  @media (min-width: 768px) {
    .redesign-ugc__heading {
      font-size: 40px;
    }
  }

  .redesign-ugc__subheading {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 15px;
    opacity: 0.8;
    margin: 0 0 8px;
  }

  .redesign-ugc__hashtag {
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    opacity: 0.6;
  }

  /* Photo Grid */
  .redesign-ugc__photos {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4px;
    margin-bottom: 40px;
  }

  @media (min-width: 768px) {
    .redesign-ugc__photos {
      grid-template-columns: repeat(6, 1fr);
      gap: 8px;
    }

    .redesign-ugc__photos[data-count="4"] {
      grid-template-columns: repeat(4, 1fr);
    }

    .redesign-ugc__photos[data-count="5"] {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  .redesign-ugc__photo {
    position: relative;
    aspect-ratio: 1;
    overflow: hidden;
  }

  .redesign-ugc__photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .redesign-ugc__photo:hover img {
    transform: scale(1.05);
  }

  .redesign-ugc__photo-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
  }

  .redesign-ugc__photo-age {
    position: absolute;
    bottom: 8px;
    left: 8px;
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 4px 8px;
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Reviews */
  .redesign-ugc__reviews {
    overflow-x: auto;
    margin: 0 -20px 40px;
    padding: 0 20px;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .redesign-ugc__reviews::-webkit-scrollbar {
    display: none;
  }

  @media (min-width: 768px) {
    .redesign-ugc__reviews {
      margin: 0 0 40px;
      padding: 0;
      overflow: visible;
    }
  }

  .redesign-ugc__reviews-track {
    display: flex;
    gap: 20px;
  }

  @media (min-width: 768px) {
    .redesign-ugc__reviews-track {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
    }
  }

  .redesign-ugc__review {
    flex: 0 0 280px;
    background: #fff;
    padding: 24px;
    border: 1px solid rgba(0, 0, 0, 0.08);
  }

  @media (min-width: 768px) {
    .redesign-ugc__review {
      flex: none;
    }
  }

  .redesign-ugc__review-stars {
    display: flex;
    gap: 2px;
    margin-bottom: 12px;
  }

  .redesign-ugc__review-title {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 16px;
    font-weight: 600;
    margin: 0 0 8px;
  }

  .redesign-ugc__review-text {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 14px;
    line-height: 1.6;
    margin: 0 0 16px;
    opacity: 0.85;
  }

  .redesign-ugc__review-author {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 4px;
    font-family: 'ArticulatCF', sans-serif;
    font-size: 13px;
    margin-bottom: 8px;
  }

  .redesign-ugc__review-name {
    font-weight: 600;
  }

  .redesign-ugc__review-age {
    opacity: 0.7;
  }

  .redesign-ugc__review-verified {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    opacity: 0.7;
    margin-left: 4px;
  }

  .redesign-ugc__review-product {
    display: block;
    font-family: 'BaseMonoWideWeb', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.5;
  }

  /* Age Callout */
  .redesign-ugc__callout {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.03);
    margin-bottom: 32px;
    text-align: center;
  }

  .redesign-ugc__callout svg {
    flex-shrink: 0;
    opacity: 0.6;
  }

  .redesign-ugc__callout p {
    font-family: 'ArticulatCF', sans-serif;
    font-size: 14px;
    margin: 0;
    opacity: 0.8;
  }

  /* CTA */
  .redesign-ugc__cta-wrapper {
    text-align: center;
  }

  .redesign-ugc__cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    background: var(--text-color);
    color: var(--bg-color);
    font-family: 'ArticulatCF', sans-serif;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    border: 2px solid var(--text-color);
    transition: all 0.3s ease;
  }

  .redesign-ugc__cta:hover {
    background: transparent;
    color: var(--text-color);
  }
</style>

{% schema %}
{
  "name": "Redesign - UGC & Reviews",
  "tag": "section",
  "class": "redesign-ugc-section",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Real People, Real Results"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "See how customers of all ages wear Jones Road"
    },
    {
      "type": "text",
      "id": "hashtag",
      "label": "Hashtag",
      "default": "#JonesRoadBeauty"
    },
    {
      "type": "header",
      "content": "Age Diversity Callout"
    },
    {
      "type": "checkbox",
      "id": "show_age_callout",
      "label": "Show Age Diversity Message",
      "default": true
    },
    {
      "type": "text",
      "id": "age_callout_text",
      "label": "Callout Text",
      "default": "Our customers range from 18 to 80+. Beauty has no age limit."
    },
    {
      "type": "header",
      "content": "CTA"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "Read All Reviews"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f7f5"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "photo",
      "name": "Customer Photo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Photo"
        },
        {
          "type": "text",
          "id": "age",
          "label": "Age",
          "info": "Shows age to demonstrate diversity"
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Caption (Alt Text)"
        }
      ]
    },
    {
      "type": "review",
      "name": "Customer Review",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Review Title",
          "default": "Finally, makeup for me!"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review Text",
          "default": "At 54, I thought glowing skin wasn't possible anymore. This Miracle Balm proved me wrong. It's now my everyday go-to."
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author Name",
          "default": "Jennifer K."
        },
        {
          "type": "text",
          "id": "age",
          "label": "Age",
          "default": "54"
        },
        {
          "type": "checkbox",
          "id": "verified",
          "label": "Verified Buyer",
          "default": true
        },
        {
          "type": "text",
          "id": "product",
          "label": "Product Name",
          "default": "Miracle Balm"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Redesign - UGC & Reviews",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "title": "Finally, makeup for me!",
            "text": "At 54, I thought glowing skin wasn't possible anymore. This Miracle Balm proved me wrong. It's now my everyday go-to.",
            "author": "Jennifer K.",
            "age": "54",
            "verified": true,
            "product": "Miracle Balm"
          }
        },
        {
          "type": "review",
          "settings": {
            "title": "Simple and beautiful",
            "text": "I love that this brand is clean and the products are so easy to use. Perfect for my busy mornings!",
            "author": "Maria L.",
            "age": "38",
            "verified": true,
            "product": "What The Foundation"
          }
        },
        {
          "type": "review",
          "settings": {
            "title": "My mom and I both love it",
            "text": "Bought it for myself and my 72-year-old mom. We both look amazing in the same shade. That's rare!",
            "author": "Ashley T.",
            "age": "29",
            "verified": true,
            "product": "Miracle Balm"
          }
        }
      ]
    }
  ]
}
{% endschema %}
